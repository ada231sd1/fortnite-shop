<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fortnite Live Shop</title>

<style>
body {
  background: #0b1220;
  color: white;
  font-family: Arial, sans-serif;
}
h1 { text-align: center; }
#timer {
  text-align: center;
  margin-bottom: 20px;
  font-size: 18px;
}
.item {
  display: flex;
  align-items: center;
  background: #111827;
  margin: 10px 0;
  padding: 10px;
  border-radius: 8px;
}
.item img {
  width: 80px;
  margin-right: 15px;
}
</style>
</head>

<body>

<h1>Fortnite Item Shop</h1>
<div id="timer">Loading timer…</div>
<div id="shop">Loading shop…</div>

<script>
const API =
  "https://corsproxy.io/?https://fortnite-api.com/v2/shop/br";

// next shop reset (00:00 UTC)
function nextResetUTC() {
  const now = new Date();
  return new Date(Date.UTC(
    now.getUTCFullYear(),
    now.getUTCMonth(),
    now.getUTCDate() + 1,
    0,0,0
  ));
}

setInterval(() => {
  const diff = nextResetUTC() - new Date();
  if (diff <= 0) return;
  const h = Math.floor(diff / 3600000);
  const m = Math.floor((diff % 3600000) / 60000);
  const s = Math.floor((diff % 60000) / 1000);
  document.getElementById("timer").textContent =
    `Shop refresh in ${h}h ${m}m ${s}s`;
}, 1000);

fetch(API)
  .then(r => r.json())
  .then(data => {
    const shop = document.getElementById("shop");
    shop.innerHTML = "";

    const entries = [
      ...data.data.featured.entries,
      ...data.data.daily.entries
    ];

    entries.forEach(e => {
      const item = e.items[0];
      const vb = e.finalPrice;
      const usd = (vb * 0.005).toFixed(2);

      const div = document.createElement("div");
      div.className = "item";
      div.innerHTML = `
        <img src="${item.images.icon}">
        <div>
          <strong>${item.name}</strong><br>
          ${vb} V-Bucks ($${usd})
        </div>
      `;
      shop.appendChild(div);
    });
  })
  .catch(err => {
    document.getElementById("shop").textContent =
      "Failed to load shop.";
    console.error(err);
  });
</script>

</body>
</html>
